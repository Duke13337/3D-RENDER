# 🎮 3D Renderer Project — Полная инструкция пользователя (EXE)

---

## 📦 Описание

Это современное приложение для 3D-визуализации, в котором вы можете создавать и просматривать 3D-сцены, управлять камерой, добавлять объекты (кубы), а также играть в мини-игры (слот-машина, блэкджек). Всё работает через один EXE-файл — не нужен Python или Visual Studio!

---

## 🗂️ Структура папки для запуска

Перед запуском убедитесь, что у вас есть следующая структура:

```
ваша_папка/
  3d_renderer.exe           # ГЛАВНЫЙ ФАЙЛ — запускайте его!
  renderer3d.dll            # ВАЖНО! DLL ядра рендера (лежит рядом с exe)
  SDL2.dll                  # ВАЖНО! DLL SDL2 (лежит рядом с exe)
  (опционально) README.md   # Инструкция
```

**ВАЖНО:**
- Все три файла (exe и две DLL) должны лежать в одной папке!
- Не переименовывайте DLL-файлы.

---

## 🚀 Как запустить программу

1. Откройте папку, где лежит `3d_renderer.exe`.
2. Дважды кликните по `3d_renderer.exe` (или выберите "Открыть").
3. Через несколько секунд появится главное окно программы.

---

## 🖥️ Описание интерфейса

- **3D-область** — основная часть окна, где отображаются объекты.
- **Панель управления** — справа или снизу (в зависимости от размера окна):
  - Кнопки для добавления кубов, создания сцен, очистки, сброса камеры.
  - Слайдеры для точной настройки позиции и размера объектов.
  - Кнопки для запуска мини-игр.
- **Строка состояния** — внизу: подсказки, количество объектов, статус функций.

---

## 🎮 Управление камерой и сценой

- **ПКМ (правая кнопка мыши):** орбитальное вращение вокруг центра сцены
  - Зажмите ПКМ и двигайте мышь — камера "обходит" сцену по кругу.
- **СКМ (средняя кнопка мыши/колёсико):** панорамирование
  - Зажмите СКМ и двигайте мышь — сцена смещается влево/вправо/вверх/вниз.
- **Колесо мыши:** зум
  - Крутите колесо — приближение/отдаление камеры.
- **Кнопки "Сброс камеры" и "Очистить сцену"** — возвращают камеру и сцену к исходному виду.

---

## 🧩 Работа с объектами

- **Добавить куб:**
  - Нажмите кнопку "Добавить куб" — в центре сцены появится новый куб.
  - Используйте слайдеры для изменения позиции и размера.
- **Случайный куб:**
  - Кнопка "Случайный куб" — добавляет куб в случайном месте.
- **Линия/Круг:**
  - Кнопки "Линия кубов" и "Круг кубов" — создают красивые паттерны.
- **Очистить сцену:**
  - Удаляет все объекты, кроме стартового.

---

## 🕹️ Мини-игры

- **Слот-машина:**
  - Кнопка "Казино" — откроется мини-игра, где можно крутить барабаны и выигрывать монеты.
- **Блэкджек:**
  - Кнопка "Блэкджек" — классическая карточная игра против компьютера.
- Все мини-игры работают прямо в приложении, не мешая 3D-сцене.

---

## 🛠️ Примеры кода и объяснения

### Загрузка DLL и определение функций

```python
import ctypes

# Загрузка DLL
renderer3d = ctypes.CDLL("./renderer3d.dll")

# Описание аргументов и возвращаемых типов для функций
renderer3d.InitRenderer3D.argtypes = [ctypes.c_int, ctypes.c_int]
renderer3d.RenderFrame.restype = None
renderer3d.AddCube.argtypes = [ctypes.c_float, ctypes.c_float, ctypes.c_float, ctypes.c_float]
```
**Пояснение:**
Так Python узнаёт, как правильно вызывать функции из DLL. Без этого возможны сбои или краши.

---

### Инициализация окна и рендера

```python
class SDLWidget(QtWidgets.QWidget):
    def showEvent(self, event):
        if not self.is_initialized:
            size = self.size()
            renderer3d.InitRenderer3D(size.width(), size.height())
            renderer3d.AddCube(0.0, 0.0, -10.0, 1.0)
            self.is_initialized = True
```
**Пояснение:**
При первом показе окна вызывается инициализация рендера и добавляется стартовый куб.

---

### Основной цикл рендера

```python
def update_frame(self):
    try:
        renderer3d.RenderFrame()
    except:
        pass  # Игнорируем ошибки рендера
```
**Пояснение:**
Этот метод вызывается таймером примерно 60 раз в секунду, чтобы обновлять 3D-изображение.

---

### Управление камерой (C++)

```cpp
void handleCameraInput(const SDL_Event& event) {
    if (event.type == SDL_MOUSEMOTION && rightMouseDown) {
        cameraAngleY += dx * 0.01f;
        cameraAngleX += dy * 0.01f;
        // Ограничения по вертикали
        if (cameraAngleX > 1.5f) cameraAngleX = 1.5f;
        if (cameraAngleX < -1.5f) cameraAngleX = -1.5f;
    }
}
```
**Пояснение:**
Вращение камеры реализовано на стороне C++. При зажатой ПКМ мыши камера вращается вокруг центра сцены.

---

### Добавление куба

```python
def add_cube(self):
    x, y, z, size = self.get_current_position(), self.get_current_size()
    renderer3d.AddCube(x, y, z, size)
```
**Пояснение:**
Кнопка "Добавить куб" вызывает эту функцию, которая добавляет новый куб в сцену через DLL.

---

### Мини-игры

Внутри test_improved.py реализованы классы SlotMachineWindow и BlackjackWindow — это отдельные окна с логикой игр, написанной на Python, но не мешающей 3D-рендеру.

---

## 🧑‍💻 Как работает программа (под капотом)

1. **Запуск exe** — создаётся окно PyQt6.
2. **Загрузка DLL** — Python связывается с C++ ядром.
3. **Инициализация рендера** — создаётся OpenGL-окно внутри виджета.
4. **Основной цикл** — таймер вызывает RenderFrame, который:
   - Обрабатывает события мыши (вращение, панорамирование, зум)
   - Рисует все кубы
   - Обновляет изображение на экране
5. **Добавление/удаление объектов** — через кнопки GUI, команды идут в DLL.
6. **Мини-игры** — отдельные окна, не мешают 3D-рендеру.

---

## ⚠️ Частые ошибки и их решение

1. **Ошибка: "Не найден renderer3d.dll" или "Не найден SDL2.dll"**
   - Проверьте, что оба DLL-файла лежат в одной папке с exe.
   - Не переименовывайте DLL!
2. **Окно не открывается или сразу закрывается**
   - Запустите exe через командную строку (cmd), чтобы увидеть текст ошибки.
   - Проверьте, что ваша видеокарта поддерживает OpenGL (обновите драйверы).
3. **Нет реакции на мышь/кнопки**
   - Убедитесь, что окно активно (кликните по нему).
   - Проверьте, не зависла ли программа (закройте и откройте снова).
4. **Мини-игры не запускаются**
   - Возможно, exe был собран без поддержки PyQt6 — используйте оригинальный exe из релиза.

---

## 📝 FAQ (Часто задаваемые вопросы)

**Q: Можно ли запускать на другом компьютере?**
A: Да! Просто скопируйте exe и обе DLL в одну папку на другом ПК. Не нужен Python или Visual Studio.

**Q: Как добавить свои объекты?**
A: Используйте кнопки и слайдеры в интерфейсе. Для расширения функционала — обратитесь к автору или смотрите исходники на GitHub.

**Q: Можно ли изменить цвет фона?**
A: Да, если в вашей версии есть кнопка "Цвет фона" — используйте её. В базовой версии цвет фиксирован.

**Q: Как сбросить камеру?**
A: Кнопка "Сброс камеры" возвращает камеру в исходное положение.

**Q: Почему exe запускается долго?**
A: Первый запуск может быть медленным из-за распаковки ресурсов. Следующие запуски будут быстрее.

**Q: Можно ли запускать на Linux/Mac?**
A: Данный exe работает только на Windows. Для других ОС используйте Python-версию.

---

## 🏆 Советы по использованию

- Не закрывайте exe "жёстко" через диспетчер задач — используйте стандартное закрытие окна.
- Если что-то не работает — попробуйте перезапустить программу.
- Для максимальной производительности используйте современную видеокарту и обновлённые драйверы.
- Не перемещайте exe и DLL по отдельности — всегда держите их вместе!

---

## 📞 Поддержка и обратная связь

- Если возникли вопросы или баги — создайте issue на GitHub: [https://github.com/Duke13337/3D-RENDER](https://github.com/Duke13337/3D-RENDER)
- Или напишите автору в Telegram: @Duke13337

---

**Наслаждайтесь 3D-визуализацией!**

---

_Данная инструкция максимально подробна. Если что-то осталось непонятно — напишите, и я дополню FAQ или добавлю скриншоты!_
